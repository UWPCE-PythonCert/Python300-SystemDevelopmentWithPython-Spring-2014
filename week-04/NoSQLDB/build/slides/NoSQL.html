<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>No SQL Databases &mdash; No SQL DataBases</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="_static/single.css" type="text/css" />
    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2014.04.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/common.js"></script>
    
    <script type="text/javascript" src="_static/slides.js"></script>
    <script type="text/javascript" src="_static/sync.js"></script>
    <script type="text/javascript" src="_static/controller.js"></script>
    <script type="text/javascript" src="_static/init.js"></script>
    
    
    <link rel="top" title="No SQL DataBases" href="index.html" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  
<article class="slide level-1" id="no-sql-databases">

<h1>No SQL Databases</h1>

<p>Some other options for storing/retrieving data.</p>




</article>
<article class="slide level-2" id="what-is-a-database">

<h2>What is a Database?</h2>

<blockquote>
<div>&quot;A database is an organized collection of data. The data are typically organized to model relevant aspects of reality in a way that supports processes requiring this information.</div></blockquote>
<p>Usually a way to persist and recover that organized data.</p>
<p>These days, when you say &quot;Database&quot; almost everyone thinks &quot;Relational Database&quot;, and SQL is the standard way to do that.</p>
<p>SQL RDBMS systems are robust, powerful, scalable and very well optimized.</p>
<p>But: They require you to adapt the relational data model.</p>




</article>
<article class="slide level-2" id="non-rdbms-options">

<h2>Non RDBMS options:</h2>

<p>A key buzzword these days is &quot;NOSQL&quot;</p>
<p>OK: They don't use SQL -- but what are they?</p>
<dl class="docutils">
<dt>Not one thing, but key features are mostly shared:</dt>
<dd><ul class="first last simple">
<li>&quot;schema less&quot;
- Document oriented</li>
<li>More direct mapping to an object model.</li>
<li>Highly Scalable
- Easier to distribute / parallelize:</li>
</ul>
</dd>
</dl>




</article>
<article class="slide level-2" id="database-schema">

<h2>Database Schema</h2>

<dl class="docutils">
<dt>Schema:</dt>
<dd><p class="first">A database schema is the organization of data, and description of how a database is constructed: Divided into database tables, and relationships: foreign keys, etc...</p>
<p class="last">Includes what fields in what tables, what data types each field is, normalization of shared data, etc.</p>
</dd>
</dl>
<p>This requires a fair bit of work up-front, and can be hard to adapt as the system requirements change.</p>
<p>It also can be a bit ugly to map your programming data model to the schema.</p>




</article>
<article class="slide level-2" id="schemaless">

<h2>Schemaless</h2>

<p>Schemaless databases generally follow a &quot;document model&quot;.</p>
<dl class="docutils">
<dt>Each entry in the database is a &quot;document&quot;:</dt>
<dd><ul class="first last simple">
<li>essentially an arbitrary collection of fields.</li>
<li>often looks like a Python dict.</li>
</ul>
</dd>
</dl>
<p>Not every entry has to have exactly the same structure.</p>
<p>Maps well to dynamic programming languages.</p>
<p>Adapts well as the system changes.</p>




</article>
<article class="slide level-2" id="nosql-in-python">

<h2>NoSQL in Python:</h2>

<p>Three Categories:</p>
<ol class="arabic simple">
<li>Simple key-value object store:<ul>
<li>shelve</li>
<li>anydbm</li>
<li>Can store (almost) any Python object</li>
<li>Only provides storage and retrieval</li>
</ul>
</li>
</ol>




</article>
<article class="slide level-2" id="id1">

<h2>NoSQL in Python:</h2>

<ol class="arabic simple" start="2">
<li>External NoSQL system:</li>
</ol>
<blockquote>
<div><ul>
<li><p class="first">Python bindings to external NoSQL system</p>
</li>
<li><p class="first">Doesn't store full Python objects</p>
</li>
<li><p class="first">Generally stores arbitrary collections of data (but not classes)</p>
</li>
<li><dl class="first docutils">
<dt>Can be simple key-value stores</dt>
<dd><ul class="first last simple">
<li>Redis, etc...</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Or a more full featured document database:</dt>
<dd><p class="first last">in-database searching, etc.
- mongoDB, etc...</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Or a Map/Reduce engine:</dt>
<dd><ul class="first last simple">
<li>Hadoop</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>




</article>
<article class="slide level-2" id="id2">

<h2>NoSQL in Python:</h2>

<ol class="arabic simple" start="3">
<li>Python object database:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Stores and retrieves arbitrary Python objects.
- Don't need to adapt your data model at all.</li>
<li>ZODB is the only robust maintained system (I know of)</li>
</ul>
</div></blockquote>




</article>
<article class="slide level-2" id="why-a-db-at-all">

<h2>Why a DB at all?</h2>

<dl class="docutils">
<dt>Reasons to use a database:</dt>
<dd><ul class="first last simple">
<li>Need to persist the data your application uses</li>
<li>May need to store more data than you can hold in memory</li>
<li>May need to have multiple apps (or multiple instances) accessing the same data</li>
<li>May need to scale -- have the DB running on a separate server(s)</li>
<li>May need to access data from systems written in different languages.</li>
</ul>
</dd>
</dl>




</article>
<article class="slide level-2" id="zodb">

<h2>ZODB</h2>

<p>The Zope Object Data Base: A native object database for Python</p>
<blockquote>
<div><ul class="simple">
<li>Transparent persistence for Python objects</li>
<li>Full ACID-compatible transaction support (including savepoints)</li>
<li>History/undo ability</li>
<li>Efficient support for binary large objects (BLOBs)</li>
<li>Pluggable storages</li>
<li>Scalable architecture</li>
</ul>
</div></blockquote>
<p><a class="reference external" href="http://http://www.zodb.org/">http://http://www.zodb.org/</a></p>




</article>
<article class="slide level-2" id="mongodb">

<h2>MongoDB</h2>

<dl class="docutils">
<dt>Document-Oriented Storage</dt>
<dd><ul class="first last simple">
<li>JSON-style documents with dynamic schemas offer simplicity and power.</li>
</ul>
</dd>
<dt>Full Index Support</dt>
<dd><ul class="first last simple">
<li>Index on any attribute, just like you're used to.</li>
</ul>
</dd>
<dt>Replication &amp; High Availability</dt>
<dd><ul class="first last simple">
<li>Mirror across LANs and WANs for scale and peace of mind.</li>
</ul>
</dd>
<dt>Auto-Sharding</dt>
<dd><ul class="first last simple">
<li>Scale horizontally without compromising functionality.</li>
</ul>
</dd>
<dt>Querying</dt>
<dd><ul class="first last simple">
<li>Rich, document-based queries.</li>
</ul>
</dd>
</dl>
<p><a class="reference external" href="https://www.mongodb.org/">https://www.mongodb.org/</a></p>




</article>
<article class="slide level-2" id="other-options-to-consider">

<h2>Other Options to Consider:</h2>

<p>Redis: Advanced, Scalable  key-value store.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://redis.io/">http://redis.io/</a></li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Riak: High availablity/scalablity (but not so good for small)</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://docs.basho.com/riak/latest/dev/taste-of-riak/python/">http://docs.basho.com/riak/latest/dev/taste-of-riak/python/</a></li>
</ul>
</dd>
<dt>HyperDex: &quot;Next generation key-value store&quot;</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://hyperdex.org/">http://hyperdex.org/</a></li>
</ul>
</dd>
<dt>Apache Cassandra: A more schema-based NoSQL solution</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://pycassa.github.io/pycassa/">http://pycassa.github.io/pycassa/</a></li>
</ul>
</dd>
</dl>




</article>
<article class="slide level-2" id="a-data-model">

<h2>A Data Model</h2>

<p>An Address Book with a not quite trivial data model.</p>
<p>There are people:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">first_name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">last_name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">middle_name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">cell_phone</span>
<span class="bp">self</span><span class="o">.</span><span class="n">email</span>
</pre></div>
</div>
<p>There are households:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
<span class="bp">self</span><span class="o">.</span><span class="n">people</span>
<span class="bp">self</span><span class="o">.</span><span class="n">address</span>
<span class="bp">self</span><span class="o">.</span><span class="n">phone</span>
</pre></div>
</div>
<p>(similarly businesses)</p>
<p><tt class="docutils literal"><span class="pre">address_book_model.py</span></tt></p>




</article>
<article class="slide level-2" id="using-zodb">

<h2>Using ZODB</h2>

<p>ZODB stored Python objects.</p>
<p>To make an object persistent:</p>
<div class="highlight-python"><div class="highlight"><pre>import persistent

class Something(persistent.Persistent):
    def __init__(self):
        self.a_field = &#39;&#39;
        self.another_field &#39;&#39;
</pre></div>
</div>
<p>When a change is made to the fields, the DB will keep it updated.</p>
<p><tt class="docutils literal"><span class="pre">code/address_book_zodb.py</span></tt></p>




</article>
<article class="slide level-2" id="mutable-attributes">

<h2>Mutable Attributes</h2>

<p><tt class="docutils literal"><span class="pre">Something.this</span> <span class="pre">=</span> <span class="pre">that</span></tt> will trigger a DB action</p>
<p>But:</p>
<p><tt class="docutils literal"><span class="pre">Something.a_list.append</span></tt> will not trigger anything.</p>
<p>The DB doesn't know that that the list has been altered.</p>
<p>Solution:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">self.a_list</span> <span class="pre">=</span> <span class="pre">PersistentList()</span></tt></div></blockquote>
<p>(also <tt class="docutils literal"><span class="pre">PersistantDict()</span></tt> )</p>
<p>(or write getters and setters...)</p>
<p><tt class="docutils literal"><span class="pre">code/address_book_zodb.py</span></tt></p>




</article>
<article class="slide level-2" id="id3">

<h2>mongoDB</h2>

<p>Essentially a key-value store, but the values are JSON-like objects. (Actually BSON (binary JSON) )</p>
<dl class="docutils">
<dt>So you can store any object that can look like JSON:</dt>
<dd><ul class="first last simple">
<li>dicts</li>
<li>lists</li>
<li>numbers</li>
<li>strings</li>
<li>richer than JSON.</li>
</ul>
</dd>
</dl>




</article>
<article class="slide level-2" id="mongodb-and-python">

<h2>mongoDB and Python</h2>

<p>mongoDB is written in C++ -- can be accesses by various language drivers.</p>
<p>( <a class="reference external" href="http://docs.mongodb.org/manual/applications/drivers/">http://docs.mongodb.org/manual/applications/drivers/</a> )</p>
<p>For Python: <tt class="docutils literal"><span class="pre">PyMongo</span></tt></p>
<p><a class="reference external" href="http://api.mongodb.org/python/current/tutorial.html">http://api.mongodb.org/python/current/tutorial.html</a></p>
<p>(<tt class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pymongo</span></tt> - but may need a copmiler!)</p>
<dl class="docutils">
<dt>There are also various tools for integrating mongoDB with FRameworks:</dt>
<dd><ul class="first last simple">
<li>Django MongoDB Engine</li>
<li>mongodb_beaker</li>
<li>MongoLog: Python logging handler</li>
<li>Flask-PyMongo</li>
<li>others...</li>
</ul>
</dd>
</dl>




</article>
<article class="slide level-2" id="getting-started-with-mongodb">

<h2>Getting started with mongoDB</h2>

<p>mongoDB is separate program. Installers here:</p>
<p><a class="reference external" href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a></p>
<dl class="docutils">
<dt>Simple copy and paste install (at least on OS-X)</dt>
<dd>(drop the files from <tt class="docutils literal"><span class="pre">bin</span></tt> into <tt class="docutils literal"><span class="pre">usr/local/bin</span></tt> or similar)</dd>
</dl>
<p>Create a dir for the database:</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mkdir</span> <span class="pre">mongo_data</span></tt></p>
<p>And start it up:</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mongod</span> <span class="pre">--dbpath=mongo_data/</span></tt></p>




</article>
<article class="slide level-2" id="creating-a-db">

<h2>Creating a DB:</h2>

<div class="highlight-python"><div class="highlight"><pre><span class="c"># create the DB</span>
<span class="kn">from</span> <span class="nn">pymongo</span> <span class="kn">import</span> <span class="n">MongoClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">27017</span><span class="p">)</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">store_name</span> <span class="c"># creates a Database</span>
<span class="n">people</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">people</span> <span class="c"># creates a collection</span>
</pre></div>
</div>
<p>mongo will link to the given database ans collection, or create new ones if they don't exist.</p>
<p>Adding some stuff:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">people</span><span class="o">.</span><span class="n">insert</span><span class="p">({</span><span class="s">&#39;first_name&#39;</span><span class="p">:</span> <span class="s">&#39;Fred&#39;</span><span class="p">,</span>
             <span class="s">&#39;last_name&#39;</span><span class="p">:</span> <span class="s">&#39;Jones&#39;</span><span class="p">})</span>
</pre></div>
</div>




</article>
<article class="slide level-2" id="pulling-stuff-out">

<h2>Pulling Stuff Out:</h2>

<p>And reading it back:</p>
<div class="highlight-python"><div class="highlight"><pre>In [16]: people.find_one({&#39;first_name&#39;:&quot;Fred&quot;})
Out[16]:
  {u&#39;_id&#39;: ObjectId(&#39;534dcdcb5c84d28b596ad15e&#39;),
   u&#39;first_name&#39;: u&#39;Fred&#39;,
   u&#39;last_name&#39;: u&#39;Jones&#39;}
</pre></div>
</div>
<p>Note that it adds an ObjectID for you.</p>
<p><a href="#id4"><span class="problematic" id="id5">``</span></a>/code/address_book_mongo.py</p>




</article>

</section>

<section id="slide_notes">

</section>

  </body>
</html>